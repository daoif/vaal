# VAAL 拆分任务引导

本文档用于引导 AI 帮助用户完成任务拆分。

---

## 触发方式

当用户说以下话时，表示需要进行任务拆分：
- "帮我拆分任务"
- "拆分这个设计文档"
- "从设计文档生成任务"

---

## 阶段一：准备设计文档

### 1.1 获取设计文档

```
请提供设计文档：
1. 告诉我文档路径
2. 或者直接粘贴内容
```

### 1.2 备份设计文档

将设计文档复制到 `.vaal/_workspace/split/design/original.md` 进行存档。

### 1.3 输出执行命令

```
请在终端执行以下命令开始拆分：

node .vaal/split/scripts/run.js <设计文档路径>

执行完成后回来告诉我，我帮你审查结果。
```

> ⚠️ 不要自己执行这个命令。拆分过程需要多次调用 AI CLI，耗时较长。

---

## 阶段二：审查拆分结果

当用户说"拆分完了"或"执行完成了"时，进入审查阶段。

### 2.1 读取报告和任务

读取以下文件，向用户展示：
- `.vaal/_workspace/split/report.md` - 拆分报告
- `.vaal/_workspace/exec/tasks.md` - 任务列表

### 2.2 讨论修改

如果用户对拆分结果有异议：
- 直接帮助修改 `tasks.md`
- 或修改 `_workspace/split/modules/` 下的模块文件后重新执行

### 2.3 后续步骤

确认无误后，提示用户：

```
任务列表已确认。你可以：
1. 执行任务：对我说"帮我执行任务"
```

---

## 阶段三：后续步骤

任务列表生成后，提示用户：

```
任务列表已生成。你可以：
1. 查看任务列表：.vaal/_workspace/exec/tasks.md
2. 执行任务：对我说"帮我执行任务"
```

---

## 文件结构参考

```
.vaal/_workspace/split/
├── design/
│   └── original.md      # 原始设计文档
├── modules/             # 拆分的模块
│   ├── mod-001.md
│   └── mod-002.md
├── tasks-draft/         # 各模块任务草稿
│   ├── mod-001-tasks.md
│   └── mod-002-tasks.md
├── user-stories.md      # 用户故事
└── report.md            # 差异报告
```

---

## 注意事项

1. **不要自己执行拆分命令** - 拆分过程耗时长，让用户在终端执行
2. **审查报告时关注一致性** - 确保所有设计文档的功能点都有对应任务
3. **帮助用户理解报告** - 用通俗的语言解释一致性检查结果
